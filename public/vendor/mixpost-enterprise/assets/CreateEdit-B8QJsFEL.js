import{x as P,i as q,y as I,r as v,T as M,l as S,o as j,c as F,a as o,u as e,b as u,d as s,w as R,m as T,_ as D,F as z,f as k,Z as H,p as g,q as x,g as i,t as r,h as b,k as $,j as Z,n as G,s as J,A as K}from"./app-ByuBUqrL.js";import{A as Q}from"./Workspace-B-GMpsIS.js";import{u as W}from"./usePageMode-CYQMu83q.js";import{_ as X}from"./PageHeader-CN-6eb5e.js";import{_ as L}from"./Panel-BpEjWyUt.js";import{_ as Y}from"./ColorPicker-ntIR4VXn.js";import{C as ee}from"./ColorPallet-BWh8FJNf.js";import{_ as se,a as ae}from"./Actions-ChP-Sho3.js";import{_ as oe}from"./LabelSuffix-9bL4Jy5O.js";import{_ as te}from"./Select-B7eUkNrn.js";import{_ as le}from"./Alert-BRwSiDj-.js";import"./Flex-DzNCiE-H.js";import"./iro.es-DqG6q-J1.js";/* empty css                                               */import"./Trash-Ep8Ewxdj.js";import"./Eye-BezOvdnp.js";const re={class:"row-py w-full mx-auto"},ne={class:"row-px"},ue={for:"name"},ie={for:"access_status"},ce={value:"subscription"},me={value:"unlimited"},de={value:"locked"},pe={class:"form-field"},Ee={__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},workspace:{type:Object}},setup(C){const m=C,{t:a}=P(),{notify:E}=K(),y=q("routePrefix"),h=I(()=>f.value?a("dashboard.create_workspace"):a("workspace.edit_workspace")),{isCreate:f,isEdit:d}=W(),p=v(!1),w=v(""),_=v(d.value&&m.workspace.owner?{key:m.workspace.owner.id,label:m.workspace.owner.name,email:m.workspace.owner.email}:null),l=M(d.value?S.cloneDeep(m.workspace):{name:"",hex_color:"",access_status:Q}),N=()=>{l.hex_color=w.value,p.value=!1},U=()=>{const c=ee();return c[S.random(0,c.length-1)]};j(()=>{if(f.value){const c=U();l.hex_color=c,w.value=c}d.value&&(w.value=m.workspace.hex_color)});const V=()=>l.transform(c=>({...c,owner_id:_.value?_.value.key:null})),A=()=>{V().post(route(`${y}.workspaces.store`))},B=()=>{V().put(route(`${y}.workspaces.update`,{workspace:m.workspace.uuid}),{onSuccess:()=>{E("success",a("workspace.workspace_updated"))}})},O=()=>{f.value&&A(),d.value&&B()};return(c,t)=>(k(),F(z,null,[o(e(H),{title:h.value},null,8,["title"]),u("div",re,[o(X,{title:h.value},{default:s(()=>[e(d)?(k(),g(se,{key:0,workspace:C.workspace,edit:!1},null,8,["workspace"])):x("",!0)]),_:1},8,["title"]),u("div",ne,[u("form",{method:"post",onSubmit:R(O,["prevent"])},[o(L,null,{title:s(()=>[i(r(e(a)("general.details")),1)]),default:s(()=>[o(b,null,{title:s(()=>[u("label",ue,[i(r(e(a)("general.name"))+" ",1),o(oe,{danger:""},{default:s(()=>t[7]||(t[7]=[i("*")])),_:1})])]),footer:s(()=>[o($,{message:e(l).errors.name},null,8,["message"])]),default:s(()=>[o(Z,{modelValue:e(l).name,"onUpdate:modelValue":t[0]||(t[0]=n=>e(l).name=n),type:"text",id:"name",placeholder:e(a)("workspace.workspace_name"),class:"w-full",autocomplete:"off",autofocus:e(f),required:""},null,8,["modelValue","placeholder","autofocus"])]),_:1}),o(b,{class:"mt-lg"},{title:s(()=>[u("label",ie,r(e(a)("general.access_status")),1)]),footer:s(()=>[o($,{message:e(l).errors.access_status},null,8,["message"])]),default:s(()=>[o(te,{modelValue:e(l).access_status,"onUpdate:modelValue":t[1]||(t[1]=n=>e(l).access_status=n),id:"access_status"},{default:s(()=>[u("option",ce,r(e(a)("subscription.requires_subscription")),1),u("option",me,r(e(a)("workspace.unlimited")),1),u("option",de,r(e(a)("workspace.locked")),1)]),_:1},8,["modelValue"])]),_:1}),o(b,{class:"mt-lg"},{title:s(()=>[i(r(e(a)("theme.color")),1)]),default:s(()=>[u("div",{onClick:t[2]||(t[2]=n=>p.value=!0),style:G({background:e(l).hex_color}),role:"button",type:"button",class:"w-xl h-xl rounded-md"},null,4)]),_:1})]),_:1}),o(L,{class:"mt-lg"},{title:s(()=>[i(r(e(a)("general.owner")),1)]),default:s(()=>[u("div",pe,[o(ae,{modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=n=>_.value=n),users:_.value?[_.value]:[]},null,8,["modelValue","users"]),e(d)?(k(),g(le,{key:0,closeable:!1,class:"mt-lg"},{default:s(()=>[i(r(e(a)("panel.add_admin_role")),1)]),_:1})):x("",!0),o($,{message:e(l).errors.owner_id},null,8,["message"])])]),_:1}),o(T,{type:"submit",class:"mt-lg",disabled:e(l).processing,isLoading:e(l).processing},{default:s(()=>[i(r(e(f)?e(a)("general.create"):e(a)("workspace.update")),1)]),_:1},8,["disabled","isLoading"])],32)])]),o(D,{show:p.value,"max-width":"md",onClose:t[6]||(t[6]=n=>p.value=!1)},{header:s(()=>[i(r(e(a)("workspace.change_workspace_color")),1)]),body:s(()=>[p.value?(k(),g(Y,{key:0,modelValue:w.value,"onUpdate:modelValue":t[4]||(t[4]=n=>w.value=n)},null,8,["modelValue"])):x("",!0)]),footer:s(()=>[o(J,{onClick:t[5]||(t[5]=n=>p.value=!1),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:s(()=>[i(r(e(a)("general.cancel")),1)]),_:1}),o(T,{onClick:N},{default:s(()=>[i(r(e(a)("general.done")),1)]),_:1})]),_:1},8,["show"])],64))}};export{Ee as default};
