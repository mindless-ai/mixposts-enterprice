import{x as F,i as S,T as O,r as z,f as i,c as h,a,d as e,P as W,g as s,t as l,u as t,s as U,k as P,j as Z,m as D,_ as H,F as y,A as Q,G as Y,b as x,H as ee,I as ae,J as te,p as _,K as R,L as I,M as k,N as oe,O as se,Q as A,R as L,X as le,S as ne,q as re,z as T,e as ie,Z as ce}from"./app-ByuBUqrL.js";import{_ as ue}from"./Workspace-Bqe3NjqN.js";import{T as de}from"./Trash-Ep8Ewxdj.js";import{_ as me}from"./NoResult-DcalDTDJ.js";import{_ as B}from"./DropdownButton-_dWS2YpT.js";import{_ as _e}from"./Panel-BpEjWyUt.js";import{_ as M,a as r,T as fe}from"./TableCell-BzscSSr-.js";import{_ as X,a as E}from"./CanApprove-CFQCzYtD.js";import{_ as q}from"./VerticalGroup-KNmuiiE8.js";import{_ as pe}from"./Flex-DzNCiE-H.js";import{_ as ve}from"./PageHeader-CN-6eb5e.js";import"./ArrowLeft-DJ_W9Jbv.js";import"./Radio-CErsXVSv.js";import"./Checkbox-11AUS_iR.js";const ke={__name:"InviteMember",props:{workspace:{type:Object}},setup(c){const{t:o}=F(),w=S("routePrefix"),{notify:C}=Q(),V=c,u=O({email:"",role:"admin",can_approve:!1}),b=()=>{u.post(route(`${w}.workspace.invitations.invite`,{workspace:V.workspace.uuid}),{preserveScroll:!0,onSuccess(){$(),u.reset(),C("success",o("team.member_invited"))}})},p=z(!1),d=()=>{p.value=!0},$=()=>{p.value=!1};return(j,v)=>(i(),h(y,null,[a(U,{onClick:d,size:"sm"},{default:e(()=>[a(W,{class:"mr-xs"}),s(" "+l(t(o)("team.invite_member")),1)]),_:1}),a(H,{show:p.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:$},{header:e(()=>[s(l(t(o)("team.invite_member")),1)]),body:e(()=>[a(q,null,{title:e(()=>[s(l(t(o)("general.email")),1)]),footer:e(()=>[a(P,{message:t(u).errors.email},null,8,["message"]),a(P,{message:t(u).errors.limit},null,8,["message"])]),default:e(()=>[a(Z,{type:"email",modelValue:t(u).email,"onUpdate:modelValue":v[0]||(v[0]=g=>t(u).email=g),error:t(u).errors.email!==void 0,placeholder:t(o)("onboarding.email_address")},null,8,["modelValue","error","placeholder"])]),_:1}),a(X,{modelValue:t(u).role,"onUpdate:modelValue":v[1]||(v[1]=g=>t(u).role=g),class:"mt-lg"},null,8,["modelValue"]),a(q,{class:"mt-lg"},{default:e(()=>[a(E,{modelValue:t(u).can_approve,"onUpdate:modelValue":v[2]||(v[2]=g=>t(u).can_approve=g)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[a(U,{onClick:$,class:"mr-xs"},{default:e(()=>[s(l(t(o)("general.cancel")),1)]),_:1}),a(D,{onClick:b,disabled:t(u).processing,isLoading:t(u).processing},{default:e(()=>[s(l(t(o)("team.invite")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},ge={},we={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function be(c,o){return i(),h("svg",we,o[0]||(o[0]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"},null,-1)]))}const he=Y(ge,[["render",be]]),$e={class:"flex justify-start"},ye={class:"flex justify-start"},xe={class:"font-medium"},Ce={__name:"WorkspaceMembers",props:{workspace:{required:!0,type:Object},users:{required:!0,type:Array},invitations:{required:!0,type:Array}},setup(c){const{t:o}=F(),w=S("routePrefix"),C=S("confirmation"),{notify:V}=Q(),{user:u}=ee(),b=c,p=z(null),d=O({user_id:null,role:"admin",can_approve:!1}),$=f=>{d.user_id=f.id,d.role=f.pivot.role,d.can_approve=f.pivot.can_approve,p.value=f},j=()=>{p.value=null,d.reset()},v=f=>{C().title(o("user.detach_user")).description(o("user.detach_user_desc",{user:f.name,workspace:b.workspace.name})).destructive().btnConfirmName("Remove").onConfirm(m=>{m.isLoading(!0),T.delete(route(`${w}.workspace.users.detach`,{workspace:b.workspace.uuid,user:f.id}),{preserveScroll:!0,onSuccess(){m.reset(),V("success",o("user.user_detached"))},onFinish(){m.isLoading(!1)}})}).show()},g=()=>{d.put(route(`${w}.workspace.users.updateRole`,{workspace:b.workspace.uuid,user:d.user_id}),{preserveScroll:!0,onSuccess(){d.reset(),j(),V("success",o("team.role_updated"))}})},G=f=>{C().title(o("team.cancel_invitation")).description(o("team.confirm_cancel_invitation",{email:f.email})).destructive().btnConfirmName("Confirm").onConfirm(m=>{m.isLoading(!0),T.delete(route(`${w}.workspace.invitations.cancel`,{workspace:b.workspace.uuid,invitation:f.uuid}),{preserveScroll:!0,onSuccess(){m.reset()},onFinish(){m.isLoading(!1)}})}).show()};return(f,m)=>{const J=ae("i18n-t"),K=te("tooltip");return i(),h(y,null,[a(_e,null,{title:e(()=>[s(l(t(o)("team.members")),1)]),description:e(()=>[s(l(t(o)("team.invite_members")),1)]),action:e(()=>[a(ke,{workspace:c.workspace},null,8,["workspace"])]),default:e(()=>[c.users.length||c.invitations.length?(i(),_(fe,{key:0},{head:e(()=>[a(M,null,{default:e(()=>[a(r,{component:"th",scope:"col"}),a(r,{component:"th",scope:"col"},{default:e(()=>[s(l(t(o)("general.name")),1)]),_:1}),a(r,{component:"th",scope:"col"},{default:e(()=>[s(l(t(o)("general.email")),1)]),_:1}),a(r,{component:"th",scope:"col"},{default:e(()=>[s(l(t(o)("team.role")),1)]),_:1}),a(r,{component:"th",scope:"col"},{default:e(()=>[s(l(t(o)("team.can_approve")),1)]),_:1}),a(r,{component:"th",scope:"col"},{default:e(()=>[s(l(t(o)("general.joined_at")),1)]),_:1}),a(r,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(i(!0),h(y,null,R(c.invitations,n=>(i(),_(M,{key:n.uuid,hoverable:!0},{default:e(()=>[a(r,{align:"left"},{default:e(()=>[x("div",$e,[a(I,{name:n.email,roundedClass:"rounded-lg"},null,8,["name"])])]),_:2},1024),a(r,null,{default:e(()=>[a(pe,{class:"justify-between"},{default:e(()=>[a(k,{variant:"warning"},{default:e(()=>[s(l(t(o)("team.pending")),1)]),_:1}),oe((i(),_(se,null,{default:e(()=>[a(he)]),_:2},1024)),[[K,`
                                         ${t(o)("team.invited_by",{user:n.author.name})}. 

                                         ${t(o)("team.invited_on",{date:n.created_at})}
                                    `]])]),_:2},1024)]),_:2},1024),a(r,null,{default:e(()=>[s(l(n.email),1)]),_:2},1024),a(r,null,{default:e(()=>[a(k,null,{default:e(()=>[s(l(t(o)(`team.${n.role}`)),1)]),_:2},1024)]),_:2},1024),a(r,null,{default:e(()=>[n.can_approve?(i(),_(k,{key:1,variant:"info"},{default:e(()=>[s(l(t(o)("general.yes")),1)]),_:1})):(i(),_(k,{key:0},{default:e(()=>[s(l(t(o)("general.no")),1)]),_:1}))]),_:2},1024),a(r,null,{default:e(()=>m[2]||(m[2]=[s("-")])),_:1}),a(r,{align:"right"},{default:e(()=>[a(A,{placement:"bottom-end"},{trigger:e(()=>[a(B)]),content:e(()=>[a(L,{onClick:N=>G(n),as:"button"},{default:e(()=>[a(le,{class:"text-red-500 mr-xs"}),s(" "+l(t(o)("general.cancel")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(i(!0),h(y,null,R(c.users,n=>(i(),_(M,{key:n.id,hoverable:!0},{default:e(()=>[a(r,{align:"left"},{default:e(()=>[x("div",ye,[a(I,{backgroundColor:n.hex_color,name:n.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])])]),_:2},1024),a(r,null,{default:e(()=>[s(l(n.name),1)]),_:2},1024),a(r,null,{default:e(()=>[s(l(n.email),1)]),_:2},1024),a(r,null,{default:e(()=>[c.workspace.owner_id===n.id?(i(),_(k,{key:0,variant:"warning"},{default:e(()=>[s(l(t(o)("general.owner")),1)]),_:1})):(i(),_(k,{key:1},{default:e(()=>[s(l(t(o)(`team.${n.pivot.role}`)),1)]),_:2},1024))]),_:2},1024),a(r,null,{default:e(()=>[n.pivot.can_approve?(i(),_(k,{key:1,variant:"info"},{default:e(()=>[s(l(t(o)("general.yes")),1)]),_:1})):(i(),_(k,{key:0},{default:e(()=>[s(l(t(o)("general.no")),1)]),_:1}))]),_:2},1024),a(r,null,{default:e(()=>[s(l(n.pivot.joined_at),1)]),_:2},1024),a(r,{align:"right"},{default:e(()=>[t(u).id!==n.id&&c.workspace.owner_id!==n.id?(i(),_(A,{key:0,placement:"bottom-end"},{trigger:e(()=>[a(B)]),content:e(()=>[a(L,{onClick:N=>$(n),as:"button"},{default:e(()=>[a(ne,{class:"mr-xs"}),s(" "+l(t(o)("user.edit_role")),1)]),_:2},1032,["onClick"]),a(L,{onClick:N=>v(n),as:"button"},{default:e(()=>[a(de,{class:"text-red-500 mr-xs"}),s(" "+l(t(o)("general.remove")),1)]),_:2},1032,["onClick"])]),_:2},1024)):re("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),_(me,{key:1}))]),_:1}),a(H,{show:p.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:j},{header:e(()=>[a(J,{keypath:"team.edit_role_for",tag:"span",scope:"global"},{user:e(()=>[x("span",xe,l(p.value.name),1)]),_:1})]),body:e(()=>[a(X,{modelValue:t(d).role,"onUpdate:modelValue":m[0]||(m[0]=n=>t(d).role=n),class:"mt-xs"},null,8,["modelValue"]),a(q,{class:"mt-lg"},{default:e(()=>[a(E,{modelValue:t(d).can_approve,"onUpdate:modelValue":m[1]||(m[1]=n=>t(d).can_approve=n)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[a(U,{onClick:j,class:"mr-xs"},{default:e(()=>[s(l(t(o)("general.cancel")),1)]),_:1}),a(D,{onClick:g,disabled:t(d).processing,isLoading:t(d).processing},{default:e(()=>[s(l(t(o)("workspace.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},Ve={class:"w-full"},je=ie({layout:ue}),ze=Object.assign(je,{__name:"Members",props:{workspace:{required:!0,type:Object},users:{required:!0,type:Array},invitations:{required:!0,type:Array}},setup(c){return S("routePrefix"),(o,w)=>(i(),h(y,null,[a(t(ce),{title:o.$t("team.team")},null,8,["title"]),a(ve,{title:o.$t("team.team"),"with-padding-x":!1},null,8,["title"]),x("div",Ve,[a(Ce,{workspace:c.workspace,users:c.users,invitations:c.invitations},null,8,["workspace","users","invitations"])])],64))}});export{ze as default};
