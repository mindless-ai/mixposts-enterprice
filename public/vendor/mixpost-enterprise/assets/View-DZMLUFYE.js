import{i as y,r as P,T as R,f as d,c as C,a,d as e,P as J,g as t,t as l,s as U,u as s,m as T,_ as B,F as j,x as A,I as K,J as Q,p as h,K as Z,b as k,L as G,M as V,q as D,N as H,Q as X,R as W,S as Y,A as ee,z as ae,Z as se,h as x}from"./app-ByuBUqrL.js";import{_ as le}from"./PageHeader-CN-6eb5e.js";import{_ as F}from"./Panel-BpEjWyUt.js";import{T as te}from"./Trash-Ep8Ewxdj.js";import{_ as oe}from"./NoResult-DcalDTDJ.js";import{_ as re}from"./DropdownButton-_dWS2YpT.js";import{_ as E,a as I}from"./CanApprove-CFQCzYtD.js";import{_ as ne}from"./SelectWorkspace-7JpHW5OW.js";import{_ as S}from"./VerticalGroup-KNmuiiE8.js";import{_ as M}from"./IsOwner-mh5jBmg2.js";import{_ as N,a as c,T as ue}from"./TableCell-BzscSSr-.js";import{E as ie}from"./Eye-BezOvdnp.js";import{_ as ce}from"./PureButtonLink-ehuUqjIX.js";import{_ as de}from"./Flex-DzNCiE-H.js";import{_ as me}from"./Indicators-BRDdDkbw.js";import{_ as _e}from"./Actions-psDkuM6E.js";import"./Radio-CErsXVSv.js";import"./Checkbox-11AUS_iR.js";const fe={__name:"AttachWorkspace",props:{user:{type:Object},attachedWorkspaces:{type:Array,default:[]}},setup(r){const o=y("routePrefix"),w=r,g=P(null),u=R({user_id:w.user.id,role:"admin",can_approve:!1,is_owner:!1}),L=()=>{u.post(route(`${o}.workspaces.users.store`,{workspace:g.value.key}),{preserveScroll:!0,onSuccess(){b(),u.reset()}})},f=P(!1),i=()=>{f.value=!0},b=()=>{f.value=!1,g.value=null};return($,m)=>(d(),C(j,null,[a(U,{onClick:i,size:"sm"},{icon:e(()=>[a(J)]),default:e(()=>[t(" "+l($.$t("general.attach")),1)]),_:1}),a(B,{show:f.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:b},{header:e(()=>[t(l($.$t("workspace.attach_workspace")),1)]),body:e(()=>[a(ne,{modelValue:g.value,"onUpdate:modelValue":m[0]||(m[0]=p=>g.value=p),exclude:r.attachedWorkspaces},null,8,["modelValue","exclude"]),a(E,{modelValue:s(u).role,"onUpdate:modelValue":m[1]||(m[1]=p=>s(u).role=p),class:"mt-lg"},null,8,["modelValue"]),a(S,{class:"mt-lg"},{default:e(()=>[a(I,{modelValue:s(u).can_approve,"onUpdate:modelValue":m[2]||(m[2]=p=>s(u).can_approve=p)},null,8,["modelValue"])]),_:1}),a(S,{class:"mt-lg"},{default:e(()=>[a(M,{modelValue:s(u).is_owner,"onUpdate:modelValue":m[3]||(m[3]=p=>s(u).is_owner=p)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[a(U,{onClick:b,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(l($.$t("general.cancel")),1)]),_:1}),a(T,{onClick:L,disabled:!g.value||s(u).processing,isLoading:s(u).processing},{default:e(()=>[t(l($.$t("general.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},pe={class:"flex justify-start"},ve={class:"flex justify-end"},ge={class:"font-medium"},$e={__name:"UserWorkspaces",props:{user:{type:Object}},setup(r){const{t:o}=A(),w=y("routePrefix"),g=y("confirmation"),u=r,{notify:L}=ee(),f=P(null),i=R({user_id:u.user.id,role:"admin",can_approve:!1,is_owner:!1}),b=v=>{i.role=v.pivot.role,i.can_approve=v.pivot.can_approve,i.is_owner=v.owner_id===u.user.id,f.value=v},$=()=>{f.value=null},m=v=>{g().title(o("workspace.detach_workspace")).description(o("workspace.detach_workspace_desc",{workspace:v.name,user:u.user.name})).destructive().btnConfirmName("Detach").onConfirm(_=>{_.isLoading(!0),ae.delete(route(`${w}.workspaces.users.delete`,{workspace:v.uuid}),{data:{user_id:u.user.id},preserveScroll:!0,onSuccess(){_.reset()},onFinish(){_.isLoading(!1)}})}).show()},p=()=>{i.put(route(`${w}.workspaces.users.update`,{workspace:f.value.uuid}),{data:{user_id:u.user.id},preserveScroll:!0,onSuccess(){i.reset(),$(),L("success",o("team.role_updated"))}})};return(v,_)=>{const O=K("i18n-t"),q=Q("tooltip");return d(),C(j,null,[a(F,null,{title:e(()=>[t(l(s(o)("workspace.workspaces")),1)]),action:e(()=>[a(fe,{user:r.user,attachedWorkspaces:r.user.workspaces.map(n=>n.uuid)},null,8,["user","attachedWorkspaces"])]),default:e(()=>[r.user.workspaces.length?(d(),h(ue,{key:0},{head:e(()=>[a(N,null,{default:e(()=>[a(c,{component:"th",scope:"col"}),a(c,{component:"th",scope:"col"},{default:e(()=>[t(l(s(o)("general.name")),1)]),_:1}),a(c,{component:"th",scope:"col"},{default:e(()=>[t(l(s(o)("team.role")),1)]),_:1}),a(c,{component:"th",scope:"col"},{default:e(()=>[t(l(s(o)("team.can_approve")),1)]),_:1}),a(c,{component:"th",scope:"col"},{default:e(()=>[t(l(s(o)("general.joined_at")),1)]),_:1}),a(c,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(d(!0),C(j,null,Z(r.user.workspaces,n=>(d(),h(N,{key:n.id,hoverable:!0},{default:e(()=>[a(c,{align:"left"},{default:e(()=>[k("div",pe,[a(G,{backgroundColor:n.hex_color,name:n.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])])]),_:2},1024),a(c,null,{default:e(()=>[a(de,null,{default:e(()=>[k("div",null,l(n.name),1),r.user.id===n.owner_id?(d(),h(V,{key:0,variant:"warning"},{default:e(()=>[t(l(s(o)("general.owner")),1)]),_:1})):D("",!0)]),_:2},1024)]),_:2},1024),a(c,null,{default:e(()=>[a(V,null,{default:e(()=>[t(l(s(o)(`team.${n.pivot.role}`)),1)]),_:2},1024)]),_:2},1024),a(c,null,{default:e(()=>[n.pivot.can_approve?(d(),h(V,{key:1,variant:"info"},{default:e(()=>[t(l(s(o)("general.yes")),1)]),_:1})):(d(),h(V,{key:0},{default:e(()=>[t(l(s(o)("general.no")),1)]),_:1}))]),_:2},1024),a(c,null,{default:e(()=>[t(l(n.pivot.joined_at),1)]),_:2},1024),a(c,{align:"right"},{default:e(()=>[k("div",ve,[H((d(),h(ce,{href:v.route(`${s(w)}.workspaces.view`,{workspace:n.uuid}),class:"mr-xs"},{default:e(()=>[a(ie)]),_:2},1032,["href"])),[[q,s(o)("general.view")]]),a(X,{placement:"bottom-end"},{trigger:e(()=>[a(re)]),content:e(()=>[a(W,{onClick:z=>b(n),as:"button"},{default:e(()=>[a(Y,{class:"mr-xs"}),t(" "+l(s(o)("user.edit_role")),1)]),_:2},1032,["onClick"]),a(W,{onClick:z=>m(n),as:"button"},{default:e(()=>[a(te,{class:"text-red-500 mr-xs"}),t(" "+l(s(o)("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),h(oe,{key:1}))]),_:1}),a(B,{show:f.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:$},{header:e(()=>[a(O,{keypath:"user.edit_role_on",tag:"span",scope:"global"},{workspace:e(()=>[k("span",ge,l(f.value.name),1)]),_:1})]),body:e(()=>[a(E,{modelValue:s(i).role,"onUpdate:modelValue":_[0]||(_[0]=n=>s(i).role=n),class:"mt-xs"},null,8,["modelValue"]),a(S,{class:"mt-lg"},{default:e(()=>[a(I,{modelValue:s(i).can_approve,"onUpdate:modelValue":_[1]||(_[1]=n=>s(i).can_approve=n)},null,8,["modelValue"])]),_:1}),a(S,{class:"mt-lg"},{default:e(()=>[a(M,{modelValue:s(i).is_owner,"onUpdate:modelValue":_[2]||(_[2]=n=>s(i).is_owner=n)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[a(U,{onClick:$,class:"mr-xs"},{default:e(()=>[t(l(s(o)("general.cancel")),1)]),_:1}),a(T,{onClick:p,disabled:s(i).processing,isLoading:s(i).processing},{default:e(()=>[t(l(s(o)("workspace.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},he={class:"w-full mx-auto row-py"},ke={class:"row-px"},we={class:"form-field"},be={class:"mt-lg"},Ie={__name:"View",props:{user:{type:Object},email_verification:{type:Boolean}},setup(r){const{t:o}=A();return y("routePrefix"),y("confirmation"),(w,g)=>(d(),C(j,null,[a(s(se),{title:s(o)("user.view_user")},null,8,["title"]),k("div",he,[a(le,{title:s(o)("user.view_user")},{description:e(()=>[t(l(r.user.name),1)]),default:e(()=>[a(_e,{user:r.user,view:!1},null,8,["user"])]),_:1},8,["title"]),k("div",ke,[a(F,null,{title:e(()=>[t(l(s(o)("user.user_details")),1)]),default:e(()=>[k("div",we,[a(me,{user:r.user,conditionalClass:"mb-lg"},null,8,["user"]),a(x,null,{title:e(()=>[t(l(s(o)("general.name")),1)]),default:e(()=>[t(" "+l(r.user.name),1)]),_:1}),a(x,{class:"mt-md"},{title:e(()=>[t(l(s(o)("general.email")),1)]),default:e(()=>[t(" "+l(r.user.email),1)]),_:1}),a(x,{class:"mt-md"},{title:e(()=>[t(l(s(o)("general.created_at")),1)]),default:e(()=>[t(" "+l(r.user.created_at),1)]),_:1}),r.email_verification?(d(),h(x,{key:0,class:"mt-md"},{title:e(()=>[t(l(s(o)("user.email_verified_at")),1)]),default:e(()=>[t(" "+l(r.user.email_verified_at?r.user.email_verified_at:"-"),1)]),_:1})):D("",!0)])]),_:1}),k("div",be,[a($e,{user:r.user},null,8,["user"])])])])],64))}};export{Ie as default};
