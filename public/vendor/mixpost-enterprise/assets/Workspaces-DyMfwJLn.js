import{x as W,i as D,H as se,r as z,J as H,f as m,c as _,b as k,N as M,u as a,p as v,d as t,a as e,R as P,S as ae,g as i,t as r,Q as G,z as O,cB as U,A as J,y as F,ab as K,L as le,q as T,F as S,G as oe,D as ne,m as Q,O as re,o as ce,by as ie,ck as E,l as j,Z as ue,v as de,bf as L,K as me}from"./app-ByuBUqrL.js";import{_ as fe,u as pe,a as ke,b as _e}from"./SearchInput-Db7C753Y.js";import{_ as we}from"./PageHeader-CN-6eb5e.js";import{_ as ge}from"./Panel-BpEjWyUt.js";import{_ as x}from"./Checkbox-11AUS_iR.js";import{a as p,_ as Z,T as $e}from"./TableCell-BzscSSr-.js";import{_ as be}from"./NoResult-DcalDTDJ.js";import{T as X}from"./Trash-Ep8Ewxdj.js";import{_ as ve}from"./Pagination-BQEHWHwS.js";import{_ as he}from"./PureButtonLink-ehuUqjIX.js";import{E as Ve}from"./Eye-BezOvdnp.js";import{_ as ye}from"./DropdownButton-_dWS2YpT.js";import{_ as Ce,a as Se}from"./Indicators-C98UMT8-.js";import{_ as q}from"./SubscriptionStatusBadge-BeL7EpCj.js";import{_ as A}from"./Flex-DzNCiE-H.js";import{S as B,c as N,b as R}from"./Subscription-CbfMHFMF.js";import{T as xe,_ as C}from"./Tab-CNQ4ra-G.js";import{_ as De}from"./VerticalGroup-KNmuiiE8.js";import"./Workspace-B-GMpsIS.js";const Te={class:"flex flex-row items-center justify-end gap-xs"},Ae={__name:"WorkspaceItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(s,{emit:o}){const{t:l}=W(),d=D("routePrefix"),$=D("confirmation"),w=s,g=o,{notify:h}=J();se();const u=z(!1),n=()=>{$().title(l("workspace.delete_workspace")).description(l("workspace.confirm_delete_workspace")+"<br><br>"+l("workspace.data_delete")).destructive().onConfirm(c=>{c.isLoading(!0),O.delete(route(`${d}.workspaces.delete`,{workspace:w.itemId}),{onSuccess(){u.value=!1,h("success",l("workspace.workspace_deleted")),g("onDelete"),U.emit("workspaceDelete",w.itemId),c.reset()},onFinish(){c.isLoading(!1)}})}).show()};return(c,I)=>{const V=H("tooltip");return m(),_("div",null,[k("div",Te,[M((m(),v(he,{href:c.route(`${a(d)}.workspaces.view`,{workspace:s.itemId})},{default:t(()=>[e(Ve)]),_:1},8,["href"])),[[V,a(l)("general.view")]]),e(G,{placement:"bottom-end"},{trigger:t(()=>[e(ye)]),content:t(()=>[e(P,{href:c.route(`${a(d)}.workspaces.edit`,{workspace:s.itemId})},{icon:t(()=>[e(ae)]),default:t(()=>[i(" "+r(a(l)("general.edit")),1)]),_:1},8,["href"]),e(P,{onClick:n,as:"button"},{icon:t(()=>[e(X,{class:"text-red-500"})]),default:t(()=>[i(" "+r(a(l)("general.delete")),1)]),_:1})]),_:1})])])}}},Ie={class:"inline-flex mr-xs"},je={class:"inline-flex mr-xs"},Oe={__name:"WorkspaceItem",props:{item:{type:Object,required:!0}},setup(s){const o=s,l=F(()=>o.item.subscriptions[0]||null);return(d,$)=>(m(),v(Z,{hoverable:!0},{default:t(()=>[e(p,{class:"w-10"},{default:t(()=>[K(d.$slots,"checkbox")]),_:3}),e(p,null,{default:t(()=>[e(le,{backgroundColor:s.item.hex_color,name:s.item.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])]),_:1}),e(p,null,{default:t(()=>[e(A,{class:"sm:items-center"},{default:t(()=>[k("span",null,r(s.item.name),1),e(Ce,{workspace:s.item},null,8,["workspace"])]),_:1})]),_:1}),e(p,null,{default:t(()=>[s.item.owner?(m(),v(Se,{key:0,name:s.item.owner.name,id:s.item.owner.id},null,8,["name","id"])):T("",!0)]),_:1}),e(p,null,{default:t(()=>[l.value?(m(),_(S,{key:0},[k("span",Ie,r(l.value.plan?l.value.plan.name:l.value.name),1),e(q,{status:l.value.status},null,8,["status"])],64)):s.item.generic_subscription?(m(),_(S,{key:1},[k("span",je,r(s.item.generic_subscription.name),1),e(q,{status:"generic"})],64)):(m(),_(S,{key:2},[i(" - ")],64))]),_:1}),e(p,null,{default:t(()=>[i(r(s.item.created_at),1)]),_:1}),e(p,null,{default:t(()=>[e(Ae,{itemId:s.item.uuid},null,8,["itemId"])]),_:1})]),_:3}))}},Ue={},Fe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Pe(s,o){return m(),_("svg",Fe,o[0]||(o[0]=[k("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"},null,-1)]))}const Ee=oe(Ue,[["render",Pe]]),Le={__name:"VerticallyScrollableContent",props:{maxHeight:{type:String,default:"xl"}},setup(s){const o=s,l=F(()=>({md:"max-h-64",lg:"max-h-72",xl:"max-h-96"})[o.maxHeight]);return(d,$)=>(m(),_("div",{class:ne([l.value,"overflow-y-auto"])},[K(d.$slots,"default")],2))}},qe={key:0,class:"px-2 py-1 rounded-md bg-white text-black font-bold"},Be={class:"p-sm"},Ne={__name:"Filters",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(s,{emit:o}){const l=s,d=o,$=F(()=>l.modelValue.access_status?l.modelValue.access_status.length:0),w=u=>{d("update:modelValue",Object.assign(l.modelValue,{subscription_status:u,free:null}))},g=()=>{d("update:modelValue",Object.assign(l.modelValue,{subscription_status:null,free:!0}))},h=()=>{d("update:modelValue",Object.assign(l.modelValue,{keyword:"",access_status:[]}))};return(u,n)=>(m(),v(A,{class:"items-start md:items-center mt-lg md:mt-0"},{default:t(()=>[e(xe,{class:"mr-lg rtl:mr-0 rtl:ml-lg"},{default:t(()=>[e(C,{onClick:n[0]||(n[0]=c=>w(null)),active:!s.modelValue.subscription_status&&!s.modelValue.free},{default:t(()=>[i(r(u.$t("general.all")),1)]),_:1},8,["active"]),e(C,{onClick:g,active:s.modelValue.free!==null},{default:t(()=>[i(r(u.$t("general.free")),1)]),_:1},8,["active"]),e(C,{onClick:n[1]||(n[1]=c=>w(a(B))),active:s.modelValue.subscription_status===a(B)},{default:t(()=>[i(r(u.$t("general.active")),1)]),_:1},8,["active"]),e(C,{onClick:n[2]||(n[2]=c=>w(a(N))),active:s.modelValue.subscription_status===a(N)},{default:t(()=>[i("Past "+r(u.$t("general.due")),1)]),_:1},8,["active"]),e(C,{onClick:n[3]||(n[3]=c=>w(a(R))),active:s.modelValue.subscription_status===a(R)},{default:t(()=>[i(r(u.$t("general.canceled")),1)]),_:1},8,["active"])]),_:1}),e(fe,{modelValue:s.modelValue.keyword,"onUpdate:modelValue":n[4]||(n[4]=c=>s.modelValue.keyword=c),placeholder:u.$t("general.search")},null,8,["modelValue","placeholder"]),e(G,{"width-classes":"w-72",placement:"bottom-end","closeable-on-content":!1},{trigger:t(()=>[e(Q,{size:"md",hiddenTextOnSmallScreen:!0},{icon:t(()=>[e(Ee)]),default:t(()=>[k("span",null,[n[8]||(n[8]=i("Filters ")),$.value?(m(),_("span",qe,r($.value),1)):T("",!0)])]),_:1})]),header:t(()=>[e(re,{onClick:h},{default:t(()=>[i(r(u.$t("general.clear_filter")),1)]),_:1})]),content:t(()=>[e(Le,null,{default:t(()=>[k("div",Be,[e(De,null,{title:t(()=>[i(r(u.$t("general.access_status")),1)]),default:t(()=>[e(A,{col:!0},{default:t(()=>[k("label",null,[e(x,{checked:s.modelValue.access_status,"onUpdate:checked":n[5]||(n[5]=c=>s.modelValue.access_status=c),value:"subscription"},null,8,["checked"]),i(" "+r(u.$t("subscription.requires_subscription")),1)]),k("label",null,[e(x,{checked:s.modelValue.access_status,"onUpdate:checked":n[6]||(n[6]=c=>s.modelValue.access_status=c),value:"unlimited"},null,8,["checked"]),i(" "+r(u.$t("workspace.unlimited")),1)]),k("label",null,[e(x,{checked:s.modelValue.access_status,"onUpdate:checked":n[7]||(n[7]=c=>s.modelValue.access_status=c),value:"locked"},null,8,["checked"]),i(" "+r(u.$t("workspace.locked")),1)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}))}},Re={class:"w-full mx-auto row-py"},We={class:"mt-lg row-px w-full"},ze={key:0,class:"mt-lg"},ut={__name:"Workspaces",props:{workspaces:{type:Object},filter:{type:Object,default:{}}},setup(s){const{t:o}=W(),l=D("routePrefix"),d=s,$=D("confirmation"),{notify:w}=J(),{selectedRecords:g,putPageRecords:h,toggleSelectRecordsOnPage:u,deselectRecord:n,deselectAllRecords:c}=pe(),I=()=>d.workspaces.data.map(f=>f.uuid),V=z({keyword:d.filter.keyword,subscription_status:d.filter.subscription_status,free:d.filter.free,access_status:d.filter.access_status});ce(()=>{h(I()),U.on("workspaceDelete",f=>{n(f)})}),ie(()=>{U.off("workspaceDelete")}),E(()=>d.workspaces.data,()=>{h(I())}),E(()=>j.cloneDeep(V.value),j.throttle(()=>{O.get(route(`${l}.workspaces.index`),j.pickBy(V.value),{preserveState:!0,only:["workspaces","filter"]})},300));const Y=()=>{$().title(o("workspace.delete_workspaces")).description(o("workspace.confirm_delete_workspaces")+"<br><br>"+o("workspace.data_delete")).destructive().onConfirm(f=>{f.isLoading(!0),O.delete(route(`${l}.workspaces.multipleDelete`),{data:{workspaces:g.value},preserveScroll:!0,onSuccess(){c(),w("success",o("workspace.selected_workspaces_deleted"))},onFinish(){f.reset()}})}).show()};return(f,y)=>{const ee=H("tooltip");return m(),_(S,null,[e(a(ue),{title:a(o)("workspace.workspaces")},null,8,["title"]),k("div",Re,[e(we,{title:a(o)("workspace.workspaces")},{description:t(()=>[i(r(a(o)("workspace.manage_workspaces_subscribers")),1)]),_:1},8,["title"]),k("div",We,[e(ke,{count:a(g).length,onClose:a(c)},{default:t(()=>[M((m(),v(_e,{onClick:Y},{default:t(()=>[e(X)]),_:1})),[[ee,a(o)("general.delete")]])]),_:1},8,["count","onClose"]),e(A,{class:"justify-between"},{default:t(()=>[e(a(de),{href:f.route(`${a(l)}.workspaces.create`),class:"mb-xs sm:mb-0"},{default:t(()=>[e(Q,null,{default:t(()=>[i(r(a(o)("dashboard.create_workspace")),1)]),_:1})]),_:1},8,["href"]),e(Ne,{modelValue:V.value,"onUpdate:modelValue":y[0]||(y[0]=b=>V.value=b)},null,8,["modelValue"])]),_:1}),e(ge,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e($e,null,{head:t(()=>[e(Z,null,{default:t(()=>[e(p,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(x,{checked:a(u),"onUpdate:checked":y[1]||(y[1]=b=>L(u)?u.value=b:null),disabled:!f.$page.props.workspaces.meta.total},null,8,["checked","disabled"])]),_:1}),e(p,{component:"th",scope:"col"}),e(p,{component:"th",scope:"col"},{default:t(()=>[i(r(a(o)("general.name")),1)]),_:1}),e(p,{component:"th",scope:"col"},{default:t(()=>[i(r(a(o)("general.owner")),1)]),_:1}),e(p,{component:"th",scope:"col"},{default:t(()=>[i(r(a(o)("general.subscription")),1)]),_:1}),e(p,{component:"th",scope:"col"},{default:t(()=>[i(r(a(o)("general.created_at")),1)]),_:1}),e(p,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(m(!0),_(S,null,me(f.$page.props.workspaces.data,b=>(m(),v(Oe,{key:b.uuid,item:b,onOnDelete:()=>{a(n)(b.uuid)}},{checkbox:t(()=>[e(x,{checked:a(g),"onUpdate:checked":y[2]||(y[2]=te=>L(g)?g.value=te:null),value:b.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),f.$page.props.workspaces.meta.total?T("",!0):(m(),v(be,{key:0,table:""}))]),_:1}),f.$page.props.workspaces.meta.links.length>3?(m(),_("div",ze,[e(ve,{meta:f.$page.props.workspaces.meta,links:f.$page.props.workspaces.links},null,8,["meta","links"])])):T("",!0)])])],64)}}};export{ut as default};
