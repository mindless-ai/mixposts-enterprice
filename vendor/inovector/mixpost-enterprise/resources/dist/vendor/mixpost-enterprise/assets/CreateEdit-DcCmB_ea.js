import{G as B,f as g,c as b,b as n,x as M,i as V,H as D,y as E,T as P,J as T,a as r,u as e,d as a,w as z,m as A,F,Z as H,p as I,q as y,g as u,t as i,h as c,k as _,j as w,N as G,A as J}from"./app-ByuBUqrL.js";import{u as O}from"./usePageMode-CYQMu83q.js";import{_ as Z}from"./PageHeader-CN-6eb5e.js";import{_ as $}from"./Panel-BpEjWyUt.js";import{_ as S}from"./Radio-CErsXVSv.js";import{_ as K}from"./LabelSuffix-9bL4Jy5O.js";import{_ as L}from"./Flex-DzNCiE-H.js";import{_ as Q}from"./Actions-psDkuM6E.js";import"./Trash-Ep8Ewxdj.js";import"./Eye-BezOvdnp.js";const R={},W={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function X(m,t){return g(),b("svg",W,t[0]||(t[0]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1)]))}const Y=B(R,[["render",X]]),ee={class:"row-py w-full mx-auto"},se={class:"row-px"},re={for:"name"},ae={for:"email"},te={class:"flex items-center space-x-sm rtl:space-x-reverse"},oe={key:0},le={for:"password"},ie={for:"password_confirmation"},ve={__name:"CreateEdit",props:{mode:{type:String,default:"create"},user:{type:Object}},setup(m){const{t}=M(),k=V("routePrefix");V("confirmation");const p=m,{notify:q}=J(),{user:h}=D(),x=E(()=>f.value?t("user.create_user"):t("user.edit_user")),{isCreate:f,isEdit:d}=O(),s=P({name:d.value?p.user.name:"",email:d.value?p.user.email:"",is_admin:d.value?p.user.is_admin:!1,password:"",password_confirmation:""}),U=()=>{s.post(route(`${k}.users.store`),{preserveScroll:!0,preserveState:!0})},C=()=>{s.put(route(`${k}.users.update`,{user:p.user.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const v=[t("user.user_updated"),t("user.password_changed")];q("success",s.password?v.join(`
`):v[0])}})},N=()=>{f.value&&U(),d.value&&C()};return(v,o)=>{const j=T("tooltip");return g(),b(F,null,[r(e(H),{title:x.value},null,8,["title"]),n("div",ee,[r(Z,{title:x.value},{default:a(()=>[e(d)?(g(),I(Q,{key:0,user:m.user,edit:!1},null,8,["user"])):y("",!0)]),_:1},8,["title"]),n("div",se,[n("form",{method:"post",onSubmit:z(N,["prevent"])},[r($,null,{title:a(()=>[u(i(e(t)("general.detail")),1)]),default:a(()=>[r(c,null,{title:a(()=>[n("label",re,i(e(t)("general.name")),1)]),footer:a(()=>[r(_,{message:e(s).errors.name},null,8,["message"])]),default:a(()=>[r(w,{modelValue:e(s).name,"onUpdate:modelValue":o[0]||(o[0]=l=>e(s).name=l),error:e(s).errors.name,type:"text",id:"name",class:"w-full",autofocus:"",required:""},null,8,["modelValue","error"])]),_:1}),r(c,{class:"mt-md"},{title:a(()=>[n("label",ae,i(e(t)("general.email")),1)]),footer:a(()=>[r(_,{message:e(s).errors.email},null,8,["message"])]),default:a(()=>[r(w,{modelValue:e(s).email,"onUpdate:modelValue":o[1]||(o[1]=l=>e(s).email=l),error:e(s).errors.email,type:"email",id:"email",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),r(c,{class:"mt-md"},{title:a(()=>[r(L,null,{default:a(()=>[u(i(e(t)("user.system_admin"))+" ",1),r(K,null,{default:a(()=>[G(r(Y,null,null,512),[[j,e(t)("user.admin_access")]])]),_:1})]),_:1})]),default:a(()=>[n("div",te,[n("label",null,[r(S,{checked:e(s).is_admin,"onUpdate:checked":o[2]||(o[2]=l=>e(s).is_admin=l),value:!1,disabled:e(d)&&m.user.id===e(h).id},null,8,["checked","disabled"]),u(" "+i(e(t)("general.no")),1)]),n("label",null,[r(S,{checked:e(s).is_admin,"onUpdate:checked":o[3]||(o[3]=l=>e(s).is_admin=l),value:!0,disabled:e(d)&&m.user.id===e(h).id},null,8,["checked","disabled"]),u(" "+i(e(t)("general.yes")),1)])])]),_:1})]),_:1}),r($,{class:"mt-lg"},{title:a(()=>[u(i(e(t)("general.password")),1)]),description:a(()=>[e(d)?(g(),b("span",oe,i(e(t)("panel.blank_no_change_password")),1)):y("",!0)]),default:a(()=>[r(c,{class:"mt-lg"},{title:a(()=>[n("label",le,i(e(t)("general.password")),1)]),footer:a(()=>[r(_,{message:e(s).errors.password},null,8,["message"])]),default:a(()=>[r(w,{modelValue:e(s).password,"onUpdate:modelValue":o[4]||(o[4]=l=>e(s).password=l),error:e(s).errors.password,type:"password",id:"password",class:"w-full",required:e(f),autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1}),r(c,{class:"mt-lg"},{title:a(()=>[n("label",ie,i(e(t)("general.confirm_password")),1)]),footer:a(()=>[r(_,{message:e(s).errors.password_confirmation},null,8,["message"])]),default:a(()=>[r(w,{modelValue:e(s).password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=l=>e(s).password_confirmation=l),error:e(s).errors.password_confirmation,type:"password",id:"password_confirmation",class:"w-full",required:!!e(s).password,autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1})]),_:1}),r(A,{type:"submit",disabled:e(s).processing,class:"mt-lg"},{default:a(()=>[u(i(e(f)?e(t)("general.create"):e(t)("workspace.update")),1)]),_:1},8,["disabled"])],32)])])],64)}}};export{ve as default};
