import{y as K,f as l,c as h,a as e,x as F,i as k,H as N,r as T,J as q,b as R,N as U,u as i,p as v,d as t,R as I,g as s,t as o,S as M,Q,z as S,cB as j,ab as Z,F as C,o as G,by as W,ck as P,l as V,q as O,Z as X,v as Y,m as ee,bf as A,K as te,A as ie}from"./app-ByuBUqrL.js";import{_ as ne,u as ae,a as se,b as oe}from"./SearchInput-Db7C753Y.js";import{_ as ce}from"./PageHeader-CN-6eb5e.js";import{_ as le}from"./Panel-BpEjWyUt.js";import{_ as B}from"./Checkbox-11AUS_iR.js";import{a as c,_ as E,T as re}from"./TableCell-BzscSSr-.js";import{_ as ue}from"./NoResult-DcalDTDJ.js";import{T as L}from"./Trash-Ep8Ewxdj.js";import{_ as de}from"./Pagination-BQEHWHwS.js";import{_ as me}from"./PureButtonLink-ehuUqjIX.js";import{E as fe}from"./Eye-BezOvdnp.js";import{_ as pe}from"./DropdownButton-_dWS2YpT.js";import{A as _e}from"./ArrowDownTray-Da1KHOuq.js";import{_ as he}from"./WorkspaceLink-DWHJlV1l.js";import{_ as ve}from"./Flex-DzNCiE-H.js";const be={class:"flex items-center"},$e={__name:"Filters",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(n,{emit:m}){return K(()=>0),(a,r)=>(l(),h("div",be,[e(ne,{modelValue:n.modelValue.invoice_number,"onUpdate:modelValue":r[0]||(r[0]=b=>n.modelValue.invoice_number=b),placeholder:a.$t("finance.invoice_number")},null,8,["modelValue","placeholder"])]))}},ke={class:"flex flex-row items-center justify-end gap-xs"},we={__name:"ReceiptItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(n,{emit:m}){const{t:a}=F(),r=k("routePrefix"),b=k("confirmation"),w=n,p=m;N();const g=T(!1),$=()=>{b().title(a("finance.delete_receipt")).description(a("finance.confirm_delete_receipt")).destructive().onConfirm(u=>{u.isLoading(!0),S.delete(route(`${r}.receipts.delete`,{receipt:w.itemId}),{onSuccess(){g.value=!1,p("onDelete"),j.emit("workspaceDelete",w.itemId),u.reset()},onFinish(){u.isLoading(!1)}})}).show()};return(u,D)=>{const y=q("tooltip");return l(),h("div",null,[R("div",ke,[U((l(),v(me,{href:u.route(`${i(r)}.receipts.view`,{receipt:n.itemId})},{default:t(()=>[e(fe)]),_:1},8,["href"])),[[y,i(a)("general.view")]]),e(Q,{"width-classes":"w-36",placement:"bottom-end"},{trigger:t(()=>[e(pe)]),content:t(()=>[e(I,{as:"a",href:u.route(`${i(r)}.receipts.download`,{receipt:n.itemId})},{icon:t(()=>[e(_e)]),default:t(()=>[s(" "+o(i(a)("general.download")),1)]),_:1},8,["href"]),e(I,{href:u.route(`${i(r)}.receipts.edit`,{receipt:n.itemId})},{icon:t(()=>[e(M)]),default:t(()=>[s(" "+o(i(a)("general.edit")),1)]),_:1},8,["href"]),e(I,{onClick:$,as:"button"},{icon:t(()=>[e(L,{class:"text-red-500"})]),default:t(()=>[s(" "+o(i(a)("general.delete")),1)]),_:1})]),_:1})])])}}},ge={__name:"ReceiptItem",props:{item:{type:Object,required:!0}},setup(n){return k("routePrefix"),(m,a)=>(l(),v(E,{hoverable:!0},{default:t(()=>[e(c,{class:"w-10"},{default:t(()=>[Z(m.$slots,"checkbox")]),_:3}),e(c,null,{default:t(()=>[s(o(n.item.invoice_number),1)]),_:1}),e(c,null,{default:t(()=>[n.item.workspace?(l(),v(he,{key:0,name:n.item.workspace.name,uuid:n.item.workspace.uuid},null,8,["name","uuid"])):(l(),h(C,{key:1},[s(" - ")],64))]),_:1}),e(c,null,{default:t(()=>[s(o(n.item.amount),1)]),_:1}),e(c,null,{default:t(()=>[s(o(n.item.tax),1)]),_:1}),e(c,null,{default:t(()=>[s(o(n.item.currency),1)]),_:1}),e(c,null,{default:t(()=>[s(o(n.item.paid_at),1)]),_:1}),e(c,null,{default:t(()=>[e(we,{itemId:n.item.uuid},null,8,["itemId"])]),_:1})]),_:3}))}},ye={class:"w-full mx-auto row-py"},xe={class:"mt-lg row-px w-full"},De={key:0,class:"mt-lg"},Ee={__name:"Index",props:{receipts:{type:Object},filter:{type:Object,default:{}}},setup(n){const m=n,{t:a}=F(),r=k("routePrefix"),{notify:b}=ie(),w=k("confirmation");N();const{selectedRecords:p,putPageRecords:g,toggleSelectRecordsOnPage:$,deselectRecord:u,deselectAllRecords:D}=ae(),y=()=>m.receipts.data.map(d=>d.uuid),x=T({invoice_number:m.filter.invoice_number});G(()=>{g(y()),j.on("receiptDelete",d=>{u(d)})}),W(()=>{j.off("receiptDelete")}),P(()=>m.receipts.data,()=>{g(y())}),P(()=>V.cloneDeep(x.value),V.throttle(()=>{S.get(route(`${r}.receipts.index`),V.pickBy(x.value),{preserveState:!0,only:["receipts","filter"]})},300));const z=()=>{w().title(a("finance.delete_receipts")).description(a("finance.confirm_delete_receipts")).destructive().onConfirm(d=>{d.isLoading(!0),S.delete(route(`${r}.receipts.multipleDelete`),{data:{receipts:p.value},preserveScroll:!0,onSuccess(){D(),b("success",a("finance.selected_receipts_deleted"))},onFinish(){d.reset()}})}).show()};return(d,_)=>{const H=q("tooltip");return l(),h(C,null,[e(i(X),{title:i(a)("sidebar.receipts")},null,8,["title"]),R("div",ye,[e(ce,{title:i(a)("sidebar.receipts")},{description:t(()=>[s(o(i(a)("finance.manage_receipts")),1)]),_:1},8,["title"]),R("div",xe,[e(se,{count:i(p).length,onClose:i(D)},{default:t(()=>[U((l(),v(oe,{onClick:z},{default:t(()=>[e(L)]),_:1})),[[H,i(a)("general.delete")]])]),_:1},8,["count","onClose"]),e(ve,{class:"justify-between"},{default:t(()=>[e(i(Y),{href:d.route(`${i(r)}.receipts.create`),class:"mb-xs sm:mb-0"},{default:t(()=>[e(ee,null,{default:t(()=>[s(o(i(a)("finance.create_receipt")),1)]),_:1})]),_:1},8,["href"]),e($e,{modelValue:x.value,"onUpdate:modelValue":_[0]||(_[0]=f=>x.value=f)},null,8,["modelValue"])]),_:1}),e(le,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(re,null,{head:t(()=>[e(E,null,{default:t(()=>[e(c,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(B,{checked:i($),"onUpdate:checked":_[1]||(_[1]=f=>A($)?$.value=f:null),disabled:!n.receipts.meta.total},null,8,["checked","disabled"])]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[s(o(i(a)("finance.invoice_number")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[s(o(i(a)("workspace.workspace")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[s(o(i(a)("finance.amount")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[s(o(i(a)("finance.tax")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[s(o(i(a)("finance.currency")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[s(o(i(a)("finance.billing_date")),1)]),_:1}),e(c,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(l(!0),h(C,null,te(d.$page.props.receipts.data,f=>(l(),v(ge,{key:f.uuid,item:f,onOnDelete:()=>{i(u)(f.uuid)}},{checkbox:t(()=>[e(B,{checked:i(p),"onUpdate:checked":_[2]||(_[2]=J=>A(p)?p.value=J:null),value:f.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),n.receipts.meta.total?O("",!0):(l(),v(ue,{key:0,table:""}))]),_:1}),n.receipts.meta.links.length>3?(l(),h("div",De,[e(de,{meta:n.receipts.meta,links:n.receipts.links},null,8,["meta","links"])])):O("",!0)])])],64)}}};export{Ee as default};
