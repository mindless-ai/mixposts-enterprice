import{x as F,i as V,H as q,r as T,J as A,f as n,c as b,b as D,N as E,u as s,p as h,d as t,a as e,R as N,S as Q,g as f,t as c,q as U,Q as Z,z as j,cB as C,ab as G,L as W,y as X,o as Y,by as ee,ck as O,l as S,F as P,Z as te,v as se,m as le,bf as R,K as ae,A as re}from"./app-ByuBUqrL.js";import{_ as oe,u as ne,a as ie,b as ue}from"./SearchInput-Db7C753Y.js";import{_ as ce}from"./PageHeader-CN-6eb5e.js";import{_ as de}from"./Panel-BpEjWyUt.js";import{_ as B}from"./Checkbox-11AUS_iR.js";import{a as o,_ as L,T as me}from"./TableCell-BzscSSr-.js";import{_ as fe}from"./PureButtonLink-ehuUqjIX.js";import{E as _e}from"./Eye-BezOvdnp.js";import{T as z}from"./Trash-Ep8Ewxdj.js";import{_ as pe}from"./DropdownButton-_dWS2YpT.js";import{_ as he}from"./Indicators-BRDdDkbw.js";import{_ as H}from"./Flex-DzNCiE-H.js";import{_ as $e}from"./NoResult-DcalDTDJ.js";import{_ as ve}from"./Pagination-BQEHWHwS.js";const be={class:"flex flex-row items-center justify-end gap-xs"},ke={__name:"UserItemAction",props:{itemId:{type:Number,required:!0}},emits:["onDelete"],setup(l,{emit:a}){const{t:r}=F(),i=V("routePrefix"),$=V("confirmation"),k=l,g=a,{user:_}=q(),y=T(!1),v=()=>{$().title(r("user.delete_user")).description(r("user.confirm_delete_user")).destructive().onConfirm(d=>{d.isLoading(!0),j.delete(route(`${i}.users.delete`,{user:k.itemId}),{onSuccess(){y.value=!1,g("onDelete"),C.emit("userDelete",k.itemId),d.reset()},onFinish(){d.close()}})}).show()};return(d,I)=>{const w=A("tooltip");return n(),b("div",null,[D("div",be,[E((n(),h(fe,{href:d.route(`${s(i)}.users.view`,{user:l.itemId})},{default:t(()=>[e(_e)]),_:1},8,["href"])),[[w,s(r)("general.view")]]),e(Z,{placement:"bottom-end"},{trigger:t(()=>[e(pe)]),content:t(()=>[e(N,{href:d.route(`${s(i)}.users.edit`,{user:l.itemId})},{icon:t(()=>[e(Q)]),default:t(()=>[f(" "+c(s(r)("general.edit")),1)]),_:1},8,["href"]),s(_).id!==l.itemId?(n(),h(N,{key:0,onClick:v,as:"button"},{icon:t(()=>[e(z,{class:"text-red-500"})]),default:t(()=>[f(" "+c(s(r)("general.delete")),1)]),_:1})):U("",!0)]),_:1})])])}}},ge={__name:"UserItem",props:{item:{type:Object,required:!0}},setup(l){return(a,r)=>(n(),h(L,{hoverable:!0},{default:t(()=>[e(o,{class:"w-10"},{default:t(()=>[G(a.$slots,"checkbox")]),_:3}),e(o,null,{default:t(()=>[e(W,{name:l.item.name},null,8,["name"])]),_:1}),e(o,null,{default:t(()=>[e(H,{class:"sm:items-center"},{default:t(()=>[D("div",null,c(l.item.name),1),e(he,{user:l.item},null,8,["user"])]),_:1})]),_:1}),e(o,null,{default:t(()=>[f(c(l.item.email),1)]),_:1}),e(o,null,{default:t(()=>[f(c(l.item.created_at),1)]),_:1}),e(o,null,{default:t(()=>[e(ke,{itemId:l.item.id},null,8,["itemId"])]),_:1})]),_:3}))}},ye={class:"flex items-center"},we={__name:"Filters",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(l,{emit:a}){return X(()=>0),(r,i)=>(n(),b("div",ye,[e(oe,{modelValue:l.modelValue.keyword,"onUpdate:modelValue":i[0]||(i[0]=$=>l.modelValue.keyword=$),placeholder:r.$t("general.search")},null,8,["modelValue","placeholder"])]))}},xe={class:"w-full mx-auto row-py"},Ve={class:"mt-lg row-px w-full"},De={key:0,class:"mt-lg"},Ee={__name:"Users",props:{users:{type:Object},filter:{type:Object,default:{}}},setup(l){const{t:a}=F(),r=V("routePrefix"),i=l,{notify:$}=re(),k=V("confirmation"),{user:g}=q(),{selectedRecords:_,putPageRecords:y,toggleSelectRecordsOnPage:v,deselectRecord:d,deselectAllRecords:I}=ne(),w=()=>i.users.data.filter(u=>u.id!==g.value.id).map(u=>u.id),x=T({keyword:i.filter.keyword});Y(()=>{y(w()),C.on("userDelete",u=>{d(u)})}),ee(()=>{C.off("userDelete")}),O(()=>i.users.data,()=>{y(w())}),O(()=>S.cloneDeep(x.value),S.throttle(()=>{j.get(route(`${r}.users.index`),S.pickBy(x.value),{preserveState:!0,only:["users","filter"]})},300));const J=()=>{k().title(a("user.delete_users")).description(a("user.confirm_delete_users")).destructive().onConfirm(u=>{u.isLoading(!0),j.delete(route(`${r}.users.multipleDelete`),{data:{users:_.value},preserveScroll:!0,onSuccess(){I(),$("success",a("user.selected_users_deleted"))},onFinish(){u.reset()}})}).show()};return(u,p)=>{const K=A("tooltip");return n(),b(P,null,[e(s(te),{title:s(a)("user.users")},null,8,["title"]),D("div",xe,[e(ce,{title:s(a)("user.users")},{description:t(()=>[f(c(s(a)("user.manage_users")),1)]),_:1},8,["title"]),D("div",Ve,[e(ie,{count:s(_).length,onClose:s(I)},{default:t(()=>[E((n(),h(ue,{onClick:J},{default:t(()=>[e(z)]),_:1})),[[K,s(a)("general.delete")]])]),_:1},8,["count","onClose"]),e(H,{class:"justify-between"},{default:t(()=>[e(s(se),{href:u.route(`${s(r)}.users.create`),class:"mb-xs sm:mb-0"},{default:t(()=>[e(le,null,{default:t(()=>[f(c(s(a)("user.create_user")),1)]),_:1})]),_:1},8,["href"]),e(we,{modelValue:x.value,"onUpdate:modelValue":p[0]||(p[0]=m=>x.value=m)},null,8,["modelValue"])]),_:1}),e(de,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(me,null,{head:t(()=>[e(L,null,{default:t(()=>[e(o,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(B,{checked:s(v),"onUpdate:checked":p[1]||(p[1]=m=>R(v)?v.value=m:null),disabled:!l.users.meta.total},null,8,["checked","disabled"])]),_:1}),e(o,{component:"th",scope:"col"}),e(o,{component:"th",scope:"col"},{default:t(()=>[f(c(s(a)("general.name")),1)]),_:1}),e(o,{component:"th",scope:"col"},{default:t(()=>[f(c(s(a)("general.email")),1)]),_:1}),e(o,{component:"th",scope:"col"},{default:t(()=>[f(c(s(a)("general.created_at")),1)]),_:1}),e(o,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(n(!0),b(P,null,ae(l.users.data,m=>(n(),h(ge,{key:m.id,item:m,onOnDelete:()=>{s(d)(m.id)}},{checkbox:t(()=>[e(B,{checked:s(_),"onUpdate:checked":p[2]||(p[2]=M=>R(_)?_.value=M:null),value:m.id,disabled:m.id===s(g).id,number:""},null,8,["checked","value","disabled"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),l.users.meta.total?U("",!0):(n(),h($e,{key:0,table:""}))]),_:1}),l.users.meta.links.length>3?(n(),b("div",De,[e(ve,{meta:l.users.meta,links:l.users.links},null,8,["meta","links"])])):U("",!0)])])],64)}}};export{Ee as default};
